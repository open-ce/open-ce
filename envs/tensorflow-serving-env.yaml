builder_version: ">=4.0.0"

imported_envs:
  - bazel-env.yaml
{% if build_type == 'cuda' %}
  - tensorrt-env.yaml       #[x86_64]
{% endif %}

conda_build_configs:
  - tensorflow_serving_conda_build_config.yaml

packages:
{% if build_type == 'cuda' %}
  - feedstock: nccl
  - feedstock: cudnn
{% endif %}
  - feedstock: libevent
  - feedstock: tensorflow-serving

{% set py_ver = python | float %}
{% if py_ver >= 3.8 %}
  - feedstock: protobuf   #[ppc64le]
{% endif %}
