builder_version: ">=13.0.0"

imported_envs:
  - bazel-env.yaml
  - tensorflow-s390x-extra-deps-env.yaml
  - common-deps.yaml

packages:
{% if build_type == 'cuda' %}
  - feedstock : nccl
  - feedstock : cudnn
  - feedstock : cudatoolkit
{% endif %}
  - feedstock : https://github.com/AnacondaRecipes/absl-py-feedstock
    git_tag : be1d3b7f51b3f9896c92709885faa1819f4bd6c9
    patches :
      - feedstock-patches/absl-py/0001-Updated-absl-py-to-2.0.0.patch
  - feedstock : https://github.com/conda-forge/tokenize-rt-feedstock
    git_tag : 21f5be31c04b0fa67e5f96aa94621abba19e52c3
  - feedstock : https://github.com/conda-forge/grpcio-feedstock
    git_tag : a99441fbf15d9bafd4370ea1c88c3c54311efdff
    patches :
      - feedstock-patches/grpcio/0001-Updated-grpcio-with-opence-changes.patch
  - feedstock : https://github.com/conda-forge/python-flatbuffers-feedstock
    git_tag : 33360d623f714d44b2524320c8d2c5f3440ce435
    patches :
      - feedstock-patches/flatbuffers/0001-OpenCE-changes.patch
  - feedstock : https://github.com/conda-forge/flatbuffers-feedstock
    git_tag : 246926fe4b05d902071f4fdb12a33c338e0a7847
    patches :
      - feedstock-patches/flatbuffers/0001-fix-build-for-UBI8.patch
#  - feedstock : https://github.com/conda-forge/pyink-feedstock.git
#    git_tag : 57646639a62389746e999980f0bcbf40258307de
#    patches :
#      - feedstock-patches/pyink/0001-Upadtes-for-open-ce.patch
  - feedstock : https://github.com/conda-forge/black-feedstock.git                #[ppc64le]
    git_tag : 911d1234adb64deca486ab362083d61cbbb19709   #v24.4.2                 #[ppc64le]
    patches :                                                                     #[ppc64le]
      - feedstock-patches/black/0001-Updates-in-recipe-as-open-ce-changes.patch   #[ppc64le]
#      - feedstock-patches/black/0001-Update-patch-of-black-to-fix-s390x-build.patch #[s390x]
  - feedstock : https://github.com/conda-forge/hatch-fancy-pypi-readme-feedstock
    git_tag : 7ad703f99406292de8d0111655f989ba2fb3de64
    patches :
      - feedstock-patches/hatch-fancy-pypi-readme/0001-Upadtes-with-open-ce.patch  
  - feedstock : https://github.com/conda-forge/aiohttp-feedstock   #v3.10.2
    git_tag : 73444d61e5984b28390514413d7d56bbc5b2e27b
    patches :
      - feedstock-patches/aiohttp/0001-CVE-fixed-version-3.10.2.patch
  - feedstock : https://github.com/conda-forge/aiohappyeyeballs-feedstock.git
    git_tag : b282b4db2ac2e6ace5efa3d1bd93ac2a28563dcf
  - feedstock : https://github.com/conda-forge/proxy-py-feedstock.git
    git_tag : 0c8912c78865b55b544c1a35129187b2a6d60514
  - feedstock : https://github.com/conda-forge/re-assert-feedstock
    git_tag : 71f1d6fe03f51e7849044e193eef507c8f64f57c
  - feedstock : https://github.com/conda-forge/gunicorn-feedstock    #[s390x]
    git_tag : dfb1a0753cb407a520c0ca9856580a8cd9e6762b               #[s390x]
  - feedstock : https://github.com/conda-forge/pastedeploy-feedstock #[s390x]
    git_tag : 819ae7750312f86f2b8a75130c724bd54b3b474d              #[s390x]
  - feedstock : https://github.com/conda-forge/jaraco.text-feedstock
    git_tag : a85c541484f099f60be46dbf20dae1f5efedc05e
    patches :
      - feedstock-patches/jaraco-text/0001-Add-jaraco.context-in-run.patch
  - feedstock : https://github.com/conda-forge/paste-feedstock       #[s390x]
    git_tag : 6f51e011e9af26b1e3d416941d59fa8af7d8269e                #[s390x]
  - feedstock : https://github.com/conda-forge/zipp-feedstock   #v3.19.1
    git_tag : e5bd9fdcab2413fc4c7399400040634bc5421a3f
    patches :
      - feedstock-patches/zipp/0001-update-recipe-for-open-ce-changes.patch
  - feedstock : https://github.com/conda-forge/jaraco.test-feedstock
    git_tag : 864a27b070378481c319c22bccdba6c82977af07
  - feedstock : https://github.com/conda-forge/jaraco.context-feedstock.git
    git_tag : 819219aa5a7a0f0474525304274f952cfdc56b7f
  - feedstock : https://github.com/conda-forge/backports.tarfile-feedstock.git
    git_tag : 0aed6724708917d98af1719085b666f085030e4b
  - feedstock : keras
  - feedstock : tensorflow
  - feedstock : dm-tree
  - feedstock : tensorflow-probability
  - feedstock : tensorflow-estimator
  - feedstock : tensorboard-data-server
  - feedstock : tensorboard
  - feedstock : tensorflow-hub
  - feedstock : tensorflow-metadata
  - feedstock : etils
  - feedstock : array-record
  - feedstock : tensorflow-datasets
  - feedstock : tensorflow-text
  - feedstock : tensorflow-model-optimization
  - feedstock : tensorflow-io-gcs-filesystem  # [not s390x]
git_tag_for_env: open-ce-v1.11.2
