imported_envs:
  - bazel-env.yaml

packages:
{% if build_type == 'cuda' %}
  - feedstock : nccl
  - feedstock : cudnn
  - feedstock : cudatoolkit    #[cudatoolkit == "11.2"]
{% endif %}
  - feedstock : https://github.com/conda-forge/clangdev-feedstock     # [ppc64le]
    git_tag: 98e30dba8b405a388d5b5d0fcca3834ee40b0b1c                 # [ppc64le]
    patches:                                                          # [ppc64le]
      - feedstock-patches/clangdev/pin_gcc_libs.patch                 # [ppc64le]

{% set py_ver = python | float %}
{% if py_ver >= 3.9 %}
  - feedstock : https://github.com/conda-forge/pydot-feedstock        # [ppc64le]
    git_tag : f45b9fa8d1055b806ed2ba330a302a2244c454ec                # [ppc64le]
{% endif %}

  - feedstock : keras
  - feedstock : tensorflow
  - feedstock : dm-tree
  - feedstock : tensorflow-probability
  - feedstock : tensorflow-estimator
  - feedstock : tensorboard-data-server
  - feedstock : tensorboard
  - feedstock : tensorflow-hub
  - feedstock : tensorflow-metadata
  - feedstock : tensorflow-datasets
  - feedstock : tensorflow-text
  - feedstock : tensorflow-model-optimization
  - feedstock : typeguard
  - feedstock : tensorflow-addons
