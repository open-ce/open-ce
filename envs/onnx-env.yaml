builder_version: ">=10.0.1"

imported_envs:
{% if not s390x %}
  - tensorflow-env.yaml
{% endif %}
  - common-deps.yaml

packages:
  - feedstock : onnx
    git_tag : r1.16
{% if not s390x %}
  - feedstock : safeint
  - feedstock : gtest
  - feedstock : libdate
  - feedstock : optional-lite
  - feedstock : boost_mp11
  - feedstock : https://github.com/conda-forge/fire-feedstock
    git_tag : a691d408ec35d71fdf9aecbed6efb408affb2b80
  - feedstock : https://github.com/conda-forge/cmake-feedstock
    git_tag : 70e07324f0ab7f075c5c325a55e31ddc9b68d985
    patches :
      - feedstock-patches/cmake/0001-use-GCC-8-for-cuda-11.2-builds.patch
      - feedstock-patches/cmake/0001-P10-changes.patch         #[ppc_arch == 'p10']
  {% if build_type == 'cuda' %}
  - feedstock : cudatoolkit    #[cudatoolkit == "11.2" or cudatoolkit == "11.8"]
  - feedstock : cudnn
  - feedstock : nccl
  {% endif %}
  - feedstock : https://github.com/conda-forge/typing_extensions-feedstock.git
    git_tag : db12cbec273867700c91f82fad22aa6d27519058
  - feedstock : onnxruntime
  - feedstock : onnxconverter-common
    git_tag : r1.14
  - feedstock : skl2onnx
    git_tag : r1.16
  - feedstock : onnxmltools
    git_tag : r1.12
#  - feedstock : tf2onnx
  - feedstock : https://github.com/Archana-Shinde1/tf2onnx-feedstock
    git_tag : fix-failure
{% endif %}

git_tag_for_env: open-ce-v1.9.4
