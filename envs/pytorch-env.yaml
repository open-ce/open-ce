builder_version: ">=10.0.1"

imported_envs:
{% if build_type == 'cpu' or cudatoolkit == '11.8' %}
  - openblas-env.yaml
  - common-p10-deps.yaml      #[ppc_arch == "p10"]
  - common-deps.yaml
{% endif %}

packages:
{% if build_type == 'cpu' or cudatoolkit == '11.8' %}
#  - feedstock : pytorch
  - feedstock : https://github.com/cdeepali/pytorch-feedstock
    git_tag : dc-195_CVEfix
  - feedstock : numactl
  - feedstock : sentencepiece
  - feedstock : torchtext
{% if not s390x %}
  - feedstock : av
  - feedstock : torchvision
{% endif %}
  {% if build_type == 'cuda' %}
  - feedstock : nccl
  - feedstock : magma
  - feedstock : cudnn
  - feedstock : cudatoolkit    #[cudatoolkit == "11.2" or cudatoolkit == "11.8"]
  {% endif %}
  - feedstock : https://github.com/Aman-Surkar/torchdata-feedstock      # [build_type == 'cpu' or cudatoolkit == '11.8']
    git_tag : r0.6.0
  - feedstock : https://github.com/AnacondaRecipes/leveldb-feedstock      #[ppc_arch == "p10"]
    git_tag: 44dd156fd8f7a81536926e11b54fdbf9df2c3158                     #[ppc_arch == "p10"]
    patches:                                                              #[ppc_arch == "p10"]
      - feedstock-patches/leveldb/0001-changes-for-opence.patch           #[ppc_arch == "p10"]
{% endif %}

git_tag_for_env: open-ce-v1.9.4
