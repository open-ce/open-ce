builder_version: ">=10.0.1"

imported_envs:
  - common-deps.yaml
#  - openssl-env.yaml

packages:
{% if not s390x %}
  - feedstock : https://github.com/conda-forge/rust-feedstock
    git_tag : de8ddcf242d3c7086369f0d3d3a89fa9e1abd6c8 #1.77
    patches :                                                                         #[s390x]
      - feedstock-patches/rust/0001-Add-fix-to-support-390x-platform.patch            #[s390x]
  - feedstock : https://github.com/conda-forge/rust-activation-feedstock
    git_tag : 77337e3832b712a6de383c0a96dbe1a33d5f864f
    patches :
      - feedstock-patches/rust-activation/0001-Fixed-build.patch
  - feedstock : https://github.com/conda-forge/setuptools-rust-feedstock
    git_tag : 99db82b53099cbc1315238c835f3ad6bc7413774
    runtime_package : False                                           #[cudatoolkit == '11.2']
#  - feedstock: https://github.com/conda-forge/tokenizers-feedstock
#    git_tag : 026e5a6446124a4635e604de2dc3c1a83e66bc08
#    patches :
#     - feedstock-patches/tokenizers/0001-changes-for-opence-fips.patch                #[not s390x]
#     - feedstock-patches/tokenizers/0001-opence-changes-for-s390x.patch               #[s390x]
  - feedstock : huggingface_hub
  - feedstock : sacremoses
  - feedstock : sentencepiece
  - feedstock : transformers
{% endif %}

git_tag_for_env: open-ce-v1.9.5-cpd
