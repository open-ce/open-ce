From ee26b37c1135d0caea38889fbf54f06d9c3c7a9b Mon Sep 17 00:00:00 2001
From: Deepali Chourasia <deepch23@in.ibm.com>
Date: Tue, 11 Jul 2023 09:07:49 +0000
Subject: [PATCH] fix for python 3.11

---
 recipe/meta.yaml | 20 +++++++++-----------
 1 file changed, 9 insertions(+), 11 deletions(-)

diff --git a/recipe/meta.yaml b/recipe/meta.yaml
index 8e74dc1..1bae8dc 100644
--- a/recipe/meta.yaml
+++ b/recipe/meta.yaml
@@ -1,5 +1,5 @@
 {% set name = "coremltools" %}
-{% set version = "4.1" %}
+{% set version = "7.0b1" %}
 
 package:
   name: {{ name|lower }}
@@ -11,10 +11,10 @@ source:
   #   - CMakeLists.txt
   # so we use GitHub releases.
   url: https://github.com/apple/{{ name }}/archive/{{ version }}.tar.gz
-  sha256: fdbc1e96bdeda0b23222864cb802053c67d8165a9e000e873d9b4028815ce61b
+  sha256: 0aa4b7b466477a73984e22c46af516fb761c84c21d60cd88a0a7d29242f429b4
 
 build:
-  number: 2
+  number: 1
   # The upstream package does not support Windows.
   skip: true  # [win]
 
@@ -25,17 +25,19 @@ requirements:
     - {{ compiler('c') }}
     - {{ compiler('cxx') }}
   host:
-    - python
-    - numpy
+    - python {{ python }}
+    - numpy {{ numpy }}
     - pip
   run:
-    - python
+    - python {{ python }}
     - {{ pin_compatible('numpy') }}
     - protobuf >=3.1.0
     - six >=1.1.0
     - attrs
+    - cattrs
     - sympy
-    - scipy
+    - pyyaml {{ pyyaml }}
+    - scipy {{ scipy }}
     - tqdm
     - packaging
   run_constrained:
@@ -47,10 +49,6 @@ test:
     - coremltools
     # required for predict() on macOS
     - coremltools.libcoremlpython  # [osx]
-  commands:
-    # TODO: change to running `coremlconverter --help`
-    # when the upstream bug is fixed.
-    - test -f ${PREFIX}/bin/coremlconverter
 
 about:
   home: https://github.com/apple/coremltools
-- 
2.34.1

