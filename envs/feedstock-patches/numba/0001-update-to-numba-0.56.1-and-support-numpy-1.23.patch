From d94ae897fd4428977b175e619f573f48af6619a2 Mon Sep 17 00:00:00 2001
From: Deepali Chourasia <deepch23@in.ibm.com>
Date: Thu, 22 Sep 2022 04:37:05 +0000
Subject: [PATCH] update to numba 0.56.1 and support numpy 1.23

---
 recipe/meta.yaml | 21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)

diff --git a/recipe/meta.yaml b/recipe/meta.yaml
index b051462..a96fb64 100644
--- a/recipe/meta.yaml
+++ b/recipe/meta.yaml
@@ -1,6 +1,6 @@
 {% set name = "numba" %}
-{% set version = "0.55.1" %}
-{% set sha256 = "542a9b514031f6afae971b627930fcaec057cdb604d54db7cbddfb050c580fb9" %}
+{% set version = "0.56.1" %}
+{% set sha256 = "4c0b0063c18df39399832f1a6fbcb16c2e683b7d75fa33c54dd29a1bd1f12ef1" %}
 
 package:
   name: numba
@@ -10,8 +10,6 @@ source:
   # url: https://pypi.io/packages/source/{{ name[0] }}/{{ name }}/{{ name }}-{{ version }}.tar.gz
   url: https://github.com/numba/{{ name }}/archive/{{ version }}.tar.gz
   sha256: {{ sha256 }}
-  patches:
-    - patch-parfor.patch
 
 build:
   number: 0
@@ -41,16 +39,17 @@ requirements:
     - pip
     - setuptools
     - wheel
-    - llvmlite 0.38.*
-    - numpy
+    - llvmlite 0.39.*
+    - numpy {{ numpy }}
     - tbb-devel 2021.*
     - _openmp_mutex            # [linux and not ppc64le]
   run:
     - python
-    - {{ pin_compatible('llvmlite', max_pin='x.x') }}
-    - {{ pin_compatible('numpy') }}
+    - llvmlite 0.39.*
+    - numpy {{ numpy }}
     # needed for pkg_resources
     - setuptools
+    - importlib_metadata       # [py<39]
 
   run_constrained:
     - tbb  >=2021.0
@@ -60,16 +59,16 @@ requirements:
     - cudatoolkit >=9.2   # [x86 and not osx]
     - cudatoolkit >=9.0   # [x86 and osx]
     # scipy 1.0 or later
-    - scipy >=1.0
+    - scipy {{ scipy }}
     # numpy has a hard upper limit currently
-    - numpy >=1.18,<1.22
+    - numpy {{ numpy }}
 
 test:
   requires:
     # Required to test optional Numba features
     - jinja2
     - cffi
-    - scipy
+    - scipy {{ scipy }}
     - ipython
     - setuptools
     - pip
-- 
2.34.1

