From 5bdc93f29379f388001a226d42f960bc06e52fd1 Mon Sep 17 00:00:00 2001
From: Deepali Chourasia <deepch23@in.ibm.com>
Date: Fri, 24 Feb 2023 09:07:26 +0000
Subject: [PATCH] opence changes for fips enabled crytography

---
 recipe/meta.yaml | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/recipe/meta.yaml b/recipe/meta.yaml
index fa620f6..bf2acbc 100644
--- a/recipe/meta.yaml
+++ b/recipe/meta.yaml
@@ -11,18 +11,19 @@ source:
 build:
   number: 0
   skip: true  # [py<37 or win32]
-  script: {{ PYTHON }} -m pip install . -vv
+  string: fips_h{{ PKG_HASH }}_{{ PKG_BUILDNUM }}
+  script: CFLAGS="-I$CONDA_PREFIX/include" LDFLAGS="-L$CONDA_PREFIX/lib"  {{ PYTHON }} -m pip install . -vv
   missing_dso_whitelist:  # [s390x]
     - $RPATH/ld64.so.1    # [s390x]
 requirements:
   build:
     - {{ compiler('rust') }}
-    - vs2017_{{ target_platform }}    # [win]
+    - {{ compiler('c') }}
   host:
     - python
     - cffi >=1.12
-    - pip
-    - setuptools >=40.6.0
+    - pip {{ pip}}
+    - setuptools {{ setuptools }}
     - setuptools-rust >=0.11.4
     - wheel
   run:
-- 
2.34.1

